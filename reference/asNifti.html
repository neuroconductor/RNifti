<!-- Generated by pkgdown: do not edit by hand -->
<!DOCTYPE html>
<html lang="en">
  <head>
  <meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0">

<title>Create or modify an NIfTI image object — asNifti • RNifti</title>


<!-- jquery -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.4.1/jquery.min.js" integrity="sha256-CSXorXvZcTkaix6Yvo6HppcZGetbYMGWSFlBw8HfCJo=" crossorigin="anonymous"></script>
<!-- Bootstrap -->

<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/css/bootstrap.min.css" integrity="sha256-bZLfwXAP04zRMK2BjiO8iu9pf4FbLqX6zitd+tIvLhE=" crossorigin="anonymous" />

<script src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/js/bootstrap.min.js" integrity="sha256-nuL8/2cJ5NDSSwnKD8VqreErSWHtnEP9E7AySL+1ev4=" crossorigin="anonymous"></script>

<!-- bootstrap-toc -->
<link rel="stylesheet" href="../bootstrap-toc.css">
<script src="../bootstrap-toc.js"></script>

<!-- Font Awesome icons -->
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous" />
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous" />

<!-- clipboard.js -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script>

<!-- headroom.js -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script>

<!-- pkgdown -->
<link href="../pkgdown.css" rel="stylesheet">
<script src="../pkgdown.js"></script>




<meta property="og:title" content="Create or modify an NIfTI image object — asNifti" />
<meta property="og:description" content="This function converts a filename, array or other image class into an object
of class &quot;niftiImage&quot;, and optionally updates its metadata from a
reference image and/or changes its internal datatype. The dimensions and
pixel dimensions from the image will replace those from the reference
object, if they are available." />






<!-- mathjax -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script>

<!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]-->




  

  

  </head>

  <body data-spy="scroll" data-target="#toc">
    

    <div class="container template-reference-topic">
      <header>
      <div class="navbar navbar-default navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <span class="navbar-brand">
        <a class="navbar-link" href="../index.html">RNifti</a>
        <span class="version label label-default" data-toggle="tooltip" data-placement="bottom" title="Released version">1.3.1</span>
      </span>
    </div>

    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav">
        <li>
  <a href="../reference/index.html">Reference</a>
</li>
      </ul>
      <ul class="nav navbar-nav navbar-right">
        <li>
  <a href="https://github.com/jonclayden/RNifti/">
    <span class="fab fa-github fa-lg"></span>
     
  </a>
</li>
      </ul>
      
    </div><!--/.nav-collapse -->
  </div><!--/.container -->
</div><!--/.navbar -->

      

      </header>

<div class="row">
  <div class="col-md-9 contents">
    <div class="page-header">
    <h1>Create or modify an NIfTI image object</h1>
    <small class="dont-index">Source: <a href='https://github.com/jonclayden/RNifti/blob/master/R/nifti.R'><code>R/nifti.R</code></a></small>
    <div class="hidden name"><code>asNifti.Rd</code></div>
    </div>

    <div class="ref-description">
    <p>This function converts a filename, array or other image class into an object
of class <code>"niftiImage"</code>, and optionally updates its metadata from a
reference image and/or changes its internal datatype. The dimensions and
pixel dimensions from the <code>image</code> will replace those from the reference
object, if they are available.</p>
    </div>

    <div class="ref-usage sourceCode"><pre class='sourceCode r'><code><span class='fu'>asNifti</span><span class='op'>(</span><span class='va'>x</span>, reference <span class='op'>=</span> <span class='cn'>NULL</span>, <span class='va'>...</span><span class='op'>)</span>

<span class='co'># S3 method for default</span>
<span class='fu'>asNifti</span><span class='op'>(</span><span class='va'>x</span>, reference <span class='op'>=</span> <span class='cn'>NULL</span>, datatype <span class='op'>=</span> <span class='st'>"auto"</span>, internal <span class='op'>=</span> <span class='cn'>NA</span>, <span class='va'>...</span><span class='op'>)</span></code></pre></div>

    <h2 class="hasAnchor" id="arguments"><a class="anchor" href="#arguments"></a>Arguments</h2>
    <table class="ref-arguments">
    <colgroup><col class="name" /><col class="desc" /></colgroup>
    <tr>
      <th>x</th>
      <td><p>Any suitable object (see Details).</p></td>
    </tr>
    <tr>
      <th>reference</th>
      <td><p>An image, or a named list of NIfTI-1 properties like that
produced by <code><a href='niftiHeader.html'>niftiHeader</a></code>. The default of <code>NULL</code> will
have no effect.</p></td>
    </tr>
    <tr>
      <th>...</th>
      <td><p>Additional parameters to methods.</p></td>
    </tr>
    <tr>
      <th>datatype</th>
      <td><p>The NIfTI datatype to use within the internal image. The
default, <code>"auto"</code> uses the R type. Other possibilities are
<code>"float"</code>, <code>"int16"</code>, etc., which may be preferred to reduce
object size. However, no checks are done to ensure that the coercion
maintains precision, and this option is for advanced usage only.</p></td>
    </tr>
    <tr>
      <th>internal</th>
      <td><p>Logical value. If <code>FALSE</code>, the result will be an array
of class <code>"niftiImage"</code> containing the image pixel or voxel values,
with some metadata in attributes. If <code>TRUE</code>, the result will be an
object of class <code>"internalImage"</code>, which exposes some basic metadata
to R but stores the pixel data internally. If <code>NA</code>, the default, the
result will be an internal image only if the input <code>image</code> is. If a
new <code>datatype</code> is set then this value is implicitly <code>TRUE</code>.</p></td>
    </tr>
    </table>

    <h2 class="hasAnchor" id="value"><a class="anchor" href="#value"></a>Value</h2>

    <p>An array or internal image, with class <code>"niftiImage"</code> (and
  possibly also <code>"internalImage"</code>).</p>
    <h2 class="hasAnchor" id="details"><a class="anchor" href="#details"></a>Details</h2>

    <p>If the <code>image</code> has an internal NIfTI pointer, that will be retrieved
directly. Otherwise, if it is a string, it will be taken to be a filename.
If it looks like a <code>"nifti"</code> object (from package <code>oro.nifti</code>),
or an <code>"MriImage"</code> object (from package <code>tractor.base</code>), a
conversion will be performed. A list will be assumed to be of the form
produced by <code><a href='niftiHeader.html'>niftiHeader</a></code>. Finally, a numeric array or matrix,
or RGB array, will be converted using default image parameters.</p>
<p>If <code>reference</code> is a complete list of NIfTI-1 header fields, like that
produced by <code><a href='niftiHeader.html'>niftiHeader</a></code>, or an image, then it will be used to
create the internal object, and then the data and metadata associated with
the <code>image</code> will overwrite the appropriate parts. If <code>reference</code>
is an incomplete list, the <code>image</code> will be used to create the internal
object, and then the specified fields will be overwritten from the list.
This allows users to selectively update certain fields while leaving others
alone (but see the note below).</p>
<p>If multiple values are passed for a field that expects a scalar (which is
most of them), the first element of the vector will be used, with a warning.
An empty vector will be ignored, also with a warning. If a value of the
wrong length is passed to a vector-valued field, an error will be generated.</p>
<p>Datatype information in a list <code>reference</code> is ignored. The datatype can
only be changed using the <code>datatype</code> argument, but in this case the
internal object gets out of sync with the R array, so an internal image is
returned to avoid the mismatch. Changing the internal datatype in this way
is for advanced usage only.</p>
<p><code>retrieveNifti</code> and <code>updateNifti</code> are soft-deprecated alternative
interfaces to this function, which behave like the pre-existing functions of
the same names. They may be removed in future.</p>
    <h2 class="hasAnchor" id="note"><a class="anchor" href="#note"></a>Note</h2>

    <p>The <code>scl_slope</code> and <code>scl_inter</code> fields affect the numerical
  interpretation of the pixel data, so it is impossible in general to change
  them without also changing the array values on both the C and the R side.
  Therefore, to avoid unexpected side-effects, these fields are not affected
  by this function. The <code>dim</code> and <code>pixdim</code> fields can be changed,
  but for most users the accessor functions of the same name are much safer,
  and should be used in preference.</p>
    <h2 class="hasAnchor" id="see-also"><a class="anchor" href="#see-also"></a>See also</h2>

    <div class='dont-index'><p><code><a href='readNifti.html'>readNifti</a></code>, <code><a href='indexing.html'>$.niftiImage</a></code>,
  <code><a href='internalImage.html'>dim.internalImage</a></code>, <code><a href='pixdim.html'>pixdim</a></code>, <code><a href='xform.html'>xform</a></code></p></div>
    <h2 class="hasAnchor" id="author"><a class="anchor" href="#author"></a>Author</h2>

    <p>Jon Clayden &lt;code@clayden.org&gt;</p>

  </div>
  <div class="col-md-3 hidden-xs hidden-sm" id="pkgdown-sidebar">
    <nav id="toc" data-toggle="toc" class="sticky-top">
      <h2 data-toc-skip>Contents</h2>
    </nav>
  </div>
</div>


      <footer>
      <div class="copyright">
  <p><p>Developed by Jon Clayden, Bob Cox, Mark Jenkinson.</p></p>
</div>

<div class="pkgdown">
  <p><p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 1.6.1.9001.</p></p>
</div>

      </footer>
   </div>

  


  

  </body>
</html>


